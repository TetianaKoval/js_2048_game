parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function e(e){return o(e)||r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function o(e){if(Array.isArray(e))return c(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=document.querySelectorAll(".field-cell"),i=document.querySelector(".game-field"),d=document.querySelector(".start"),a=document.querySelector(".message-start"),u=document.querySelector(".message-lose"),s=document.querySelector(".message-win"),m=0,f=document.querySelector(".game-score");function y(){var t=e(document.querySelectorAll(".field-cell")).filter(function(e){return!e.innerText});function n(e,t){var n=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-n+1))+n}var r,o,c=n(0,e(t).length-1),i=n(0,100);r=i>=90?4:2,(o=t[c]).setAttribute("id","new-number"),setTimeout(function(){o.removeAttribute("id")},100),o.innerText=r,h(e(l))}function h(e){e.map(function(e){e.innerText?e.className="field-cell field-cell--".concat(e.innerText):(e.className="",e.classList.add("field-cell"))})}var v=document.querySelector("tbody"),x=document.createElement("tbody");function p(t,n){t.innerHTML="";for(var r=function(r){var o=e(document.querySelectorAll("td")).filter(function(e){return e.cellIndex===r}),c=document.createElement("tr");c.classList.add("field-".concat(n)),c.innerHTML="".concat(o.map(function(e){return'<td class="field-cell field-cell-'.concat(n,'">').concat(e.innerText,"</td>")}).join("")),t.append(c)},o=0;o<document.querySelector("tbody").children.length;o++)r(o);h(e(t.querySelectorAll("td")))}function T(){for(var t=document.querySelectorAll("tr"),n=function(n){var r=t[n].children;e(r).forEach(function(e){""===e.innerText&&e.parentElement.append(e)});for(var o=function(e){r[e]&&r[e+1]&&r[e].innerText===r[e+1].innerText&&""!==r[e].innerText&&(r[e].innerText=2*r[e].innerText,m+=+r[e].innerText,r[e].setAttribute("scale","1"),setTimeout(function(){r[e].removeAttribute("scale")},200),r[e+1].innerText="",t[n].append(r[e+1]))},c=0;c<r.length;c++)o(c)},r=0;r<document.querySelector("tr").children.length;r++)n(r)}function b(){for(var t=document.querySelectorAll("tr"),n=function(n){var r=t[n].children;e(r).forEach(function(e){""===e.innerText&&e.parentElement.prepend(e)});for(var o=function(e){r[e]&&r[e-1]&&r[e].innerText===r[e-1].innerText&&""!==r[e].innerText&&(r[e].innerText=2*r[e].innerText,m+=+r[e].innerText,r[e].setAttribute("scale","1"),setTimeout(function(){r[e].removeAttribute("scale")},200),r[e-1].innerText="",t[n].prepend(r[e-1]))},c=r.length-1;c>=0;c--)o(c)},r=0;r<e(document.querySelectorAll("tr")).length;r++)n(r)}function S(t){var n=[];e(document.querySelectorAll("td")).forEach(function(e){n.push(e.innerText)}),"ArrowUp"===t.key&&(document.querySelector("tbody").classList.contains("tbody-columns")||(p(x,"column"),v.remove(),i.append(x)),T()),"ArrowDown"===t.key&&(document.querySelector("tbody").classList.contains("tbody-columns")||(p(x,"column"),v.remove(),i.append(x)),b()),"ArrowLeft"===t.key&&(document.querySelector("tbody").classList.contains("tbody-columns")&&(p(v,"row"),x.remove(),i.append(v)),T()),"ArrowRight"===t.key&&(document.querySelector("tbody").classList.contains("tbody-columns")&&(p(v,"row"),x.remove(),i.append(v)),b());var r=[];e(document.querySelectorAll("td")).forEach(function(e){r.push(e.innerText)});for(var o=0;o<r.length;o++)if(r[o]!==n[o]){y();break}A(r),q(r),h(e(document.querySelectorAll(".field-cell"))),f.innerText=m}function A(e){e.find(function(e){return"2048"===e})&&(a.classList.add("hidden"),u.classList.add("hidden"),s.classList.remove("hidden"),document.removeEventListener("keydown",S))}function q(t){if(0===t.filter(function(e){return""===e}).length){var n={},r={},o=document.querySelectorAll("td");if(document.querySelector("tbody").classList.contains("tbody-columns"))for(var c=0;c<e(o).length;c++)n[o[c].cellIndex]||(n[o[c].cellIndex]=[]),n[o[c].cellIndex].push(o[c].innerText),r[o[c].parentElement.rowIndex]||(r[o[c].parentElement.rowIndex]=[]),r[o[c].parentElement.rowIndex].push(o[c].innerText);else for(var l=0;l<e(o).length;l++)r[o[l].cellIndex]||(r[o[l].cellIndex]=[]),r[o[l].cellIndex].push(o[l].innerText),n[o[l].parentElement.rowIndex]||(n[o[l].parentElement.rowIndex]=[]),n[o[l].parentElement.rowIndex].push(o[l].innerText);var i=0;for(var d in n)for(var m=1;m<n[d].length-1;m++)n[d][m]!==n[d][m-1]&&n[d][m]!==n[d][m+1]||i++;for(var f in r)for(var y=1;y<r[f].length-1;y++)r[f][y]!==r[f][y-1]&&r[f][y]!==r[f][y+1]||i++;0===i&&(u.classList.remove("hidden"),a.classList.add("hidden"),s.classList.add("hidden"),document.removeEventListener("keydown",S))}}x.classList.add("tbody-columns"),d.addEventListener("click",function(t){document.addEventListener("keydown",S),a.classList.add("hidden"),u.classList.add("hidden"),s.classList.add("hidden"),m=0,f.innerText=0;var n=document.querySelectorAll("td");e(n).find(function(e){return""!==e.innerText})&&n.forEach(function(e){e.innerText="",e.className="field-cell"}),y(),y(),h(e(document.querySelectorAll(".field-cell"))),d.innerText="Restart",d.classList.remove("start"),d.classList.add("restart")});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.9ea2d30a.js.map